<% layout('layouts/boilerplate')%> 
<% for(var i=0; i < orders.length; i++) { 
    var customer = customers.find(c => c.id === orders[i].customer_id); 
    var item = garageItems.find(g=>g.id==orders[i].garage_item_id );
    var product = products.find(p => p.id === item.product_id); %>
<p>Customer Name: <%= customer.name %></p>
<p>Order Date: <%= orders[i].order_date %></p>
<p>Order Type: <%= orders[i].order_type %></p>
<p>Garage Item: <%= product.name %></p>
<p>Quantity: <%= orders[i].quantity %></p>
<form
	method="post"
	action="/orders/<%= orders[i].id %>?_method=DELETE"
	onsubmit="return confirm('Are you sure you want to delete this order?')">
	<button type="submit" class="btn btn-danger">Delete</button>
</form>
<% } %>

<form method="post" action="/orders">
	<label for="customer_id">Customer</label>
	<select id="customer_id" name="customer_id">
		<% for(var i=0; i < customers.length; i++) { %>
		<option value="<%= customers[i].id %>"><%= customers[i].name %></option>
		<% } %>
	</select>
	<br />
	<label for="garage_item_id">Garage Item</label>
	<select id="garage_item_id" name="garage_item_id">
		<% for(var i=0; i < garageItems.length; i++) { 
            var product = products.find(p=>p.id==garageItems[i].product_id)
        %>
		<option value="<%= garageItems[i].id %>">
			<%= product.name%>
		</option>
		<% } %>
	</select>
	<br />

	<label for="order_date">Order Date</label>
	<input type="date" id="order_date" name="order_date"    " required />
	<br />

	<label for="order_type">Order Type</label>
	<select id="order_type" name="order_type">
		<option value="sell">Sell</option>
		<option value="buy">Buy</option>
	</select>
	<br />

	<label for="quantity">Quantity</label>
	<input
		type="number"
		id="quantity"
		name="quantity"
		placeholder="quantity"
		min="1"
		required />
	<br />

	<br />
	<button>Submit</button>
</form>
